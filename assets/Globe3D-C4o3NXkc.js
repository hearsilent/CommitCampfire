import{S as b,c as E,b as I,dt as D,df as G,a as k}from"./vendor-three-PgM_Uo9r.js";import{r as w}from"./vendor-react-OXzYy3Vh.js";import{G as v,g as B}from"./vendor-globe-D03urT9I.js";function U(a,s,c=0){const t=(90-a)*Math.PI/180,n=(90-s)*Math.PI/180,r=100*(1+c),o=Math.sin(t);return new k(r*o*Math.cos(n),r*Math.cos(t),r*o*Math.sin(n))}function j(a,s,c,u){const t=e=>e*Math.PI/180,n=t(s),r=t(u),o=t(a),m=t(c);return Math.acos(Math.max(-1,Math.min(1,Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(m-o))))}function O(a,s,c,u,t=.5){const n=[s,a],r=[u,c],m=j(s,a,u,c)/2*t,e=B(n,r),i=0,l=0,g=(C,R)=>R+(R-C)*(C<R?.5:.25),p=e(.25),h=e(.75),M=g(i,m),d=g(l,m),f=(C,R,P)=>U(R,C,P),A=f(s,a,i),x=f(p[0],p[1],M),y=f(h[0],h[1],d),S=f(u,c,l);return new G(A,x,y,S)}const _=({arcsData:a=[],commitArcs:s=[],pointsData:c=[],ringsData:u=[]})=>{const t=w.useRef(),n=w.useRef([]),r=w.useRef();return w.useEffect(()=>{t.current&&(t.current.controls().autoRotate=!0,t.current.controls().autoRotateSpeed=.5,t.current.pointOfView({lat:20,lng:0,altitude:2.5}))},[]),w.useEffect(()=>{if(!t.current)return;const o=t.current.scene();n.current.forEach(e=>{var i,l;o.remove(e),(i=e.geometry)==null||i.dispose(),(l=e.material)==null||l.dispose()}),n.current=[],s.forEach((e,i)=>{const l=O(e.startLat,e.startLng,e.endLat,e.endLng,.5),g=Math.min(e.ballCount||3,5);for(let p=0;p<g;p++){const h=new b(.8,16,16),M=new E({color:"#39d353",transparent:!0,opacity:.9}),d=new I(h,M),f=new b(1.2,16,16),A=new E({color:"#26a641",transparent:!0,opacity:.3}),x=new I(f,A);d.add(x),d.userData={curve:l,offset:p/g,speed:e.speed||15e-5+Math.random()*1e-4},o.add(d),n.current.push(d)}});const m=()=>{const e=Date.now();n.current.forEach(i=>{const{curve:l,offset:g,speed:p}=i.userData,h=(e*p+g)%1,M=l.getPoint(h);i.position.copy(M)}),r.current=requestAnimationFrame(m)};return s.length>0&&m(),()=>{r.current&&cancelAnimationFrame(r.current)}},[s]),D.jsx(v,{ref:t,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-night.jpg",bumpImageUrl:"//unpkg.com/three-globe/example/img/earth-topology.png",backgroundImageUrl:"//unpkg.com/three-globe/example/img/night-sky.png",atmosphereColor:"#3a228a",atmosphereAltitude:.25,arcsData:a,arcColor:o=>o.color||"#ff5c00",arcStroke:.5,arcAltitudeAutoScale:.5,pointsData:c,pointColor:o=>o.color||"#3d444d",pointAltitude:o=>o.altitude||.1,pointRadius:o=>o.size||.5,ringsData:u,ringColor:()=>"#26a641",ringMaxRadius:5,ringPropagationSpeed:2,ringRepeatPeriod:1e3})};export{_ as default};
